(this["webpackJsonpweekly-assignment"]=this["webpackJsonpweekly-assignment"]||[]).push([[0],{49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(23),r=a.n(s),o=(a(49),a(17)),i=a(8),l=(a(50),a(51),a(52),a(7)),j=a(11),b=(a(53),a(70)),m=a(39),u=a(73),O=a(72),d=a(74),h=a(13),f=a(40),x=a(15),g=a.n(x),p=a(33),v=a.n(p),y=a(38),N=a(24),C=function(e,t){switch(t.type){case"FETCH_SUCCESS":return Object(l.a)(Object(l.a)({},e),{},{imageData:t.payload.hits});case"UPLOAD":return Object(l.a)(Object(l.a)({},e),{},{imageData:[Object(l.a)(Object(l.a)({},t.payload[0]),{},{id:Date.now()})].concat(Object(N.a)(e.imageData))});case"LIKE":return Object(l.a)(Object(l.a)({},e),{},{imageData:e.imageData.map((function(e){return e.id===t.payload.id?t.payload:e}))});case"ADD_FAVORITES":return Object(l.a)(Object(l.a)({},e),{},{favorite:[t.payload].concat(Object(N.a)(e.favorite))});case"ADD_COMMENTS":return Object(l.a)(Object(l.a)({},e),{},{comments:[t.payload].concat(Object(N.a)(e.comments))});default:throw Error("Action name not defined")}},k=function(e,t){switch(t.type){case"LOGIN":return t.payload;case"LOGOUT":return{};default:throw Error("Action name not defined")}},S=a(2),I=Object(c.createContext)(),w=function(e){var t=Object(c.useState)("Travel"),a=Object(j.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!0),o=Object(j.a)(r,2),i=o[0],l=o[1],b=Object(c.useState)(""),m=Object(j.a)(b,2),u=m[0],O=m[1],d="https://pixabay.com/api/",h="22112901-d9ab6e677acd5ee1c4e0a636d",f=Object(c.useReducer)(C,[],(function(){var e=localStorage.getItem("favorite"),t=localStorage.getItem("comments");return{imageData:[],favorite:e?JSON.parse(e):[],comments:t?JSON.parse(t):[]}})),x=Object(j.a)(f,2),g=x[0],p=x[1],N=Object(c.useReducer)(k,{},(function(){var e=localStorage.getItem("loginUser");return e?JSON.parse(e):{}})),w=Object(j.a)(N,2),F=w[0],L=w[1];return Object(c.useEffect)((function(){try{i&&Object(y.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"?key=").concat(h,"&q=").concat(n,"&image_type=photo&pretty=true"));case 2:if((t=e.sent).ok){e.next=7;break}throw t.statusText;case 7:return e.next=9,t.json();case 9:a=e.sent,p({type:"FETCH_SUCCESS",payload:a}),l(!1);case 12:case"end":return e.stop()}}),e)})))()}catch(e){console.error("Failed to fetch image data. Error= ".concat(e))}}),[n,i]),Object(c.useEffect)((function(){localStorage.setItem("favorite",JSON.stringify(g.favorite))}),[g.favorite]),Object(c.useEffect)((function(){localStorage.setItem("comments",JSON.stringify(g.comments))}),[g.comments]),Object(c.useEffect)((function(){localStorage.setItem("loginUser",JSON.stringify(F))}),[F]),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(I.Provider,{value:{keyword:n,setKeyword:s,images:g,dispatchImage:p,submitFlg:i,setSubmitFlg:l,alert:u,setAlert:O,loginUser:F,dispatchUser:L},children:e.children})})},F=a(19),L=a(20),U=a(22),D=a(21),E=n.a.createContext(),T=function(e,t){switch(t.type){case"UPLOAD":return Object(l.a)(Object(l.a)({},e),{},{files:[t.payload].concat(Object(N.a)(e.files))});default:return e}},R=function(e){Object(U.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(F.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={files:[],dispatch:function(t){e.setState((function(e){return T(e,t)}))}},e}return Object(L.a)(a,[{key:"render",value:function(){return Object(S.jsx)(E.Provider,{value:this.state,children:this.props.children})}}]),a}(n.a.Component),A=E.Consumer,P=A,G=function(){var e=Object(c.useContext)(I),t=e.images,a=e.dispatchImage,n=e.alert,s=e.setAlert,r=Object(c.useContext)(P).files;Object(c.useEffect)((function(){0!==r.length&&a({type:"UPLOAD",payload:r})}),[]);var o=Object(c.useState)({display:"none"}),i=Object(j.a)(o,2),x=i[0],p=i[1],v=Object(c.useState)({}),y=Object(j.a)(v,2),N=y[0],C=y[1],k=Object(c.useState)({}),w=Object(j.a)(k,2),F=w[0],L=w[1],U=function(e,c){e.stopPropagation(),e.preventDefault();var n,s=t.imageData.find((function(e){return e.id===c}));n="likes"!==e.target.className?0!==s.comments?Object.assign(s,{comments:s.comments-1}):Object.assign(s,{comments:s.comments}):Object.assign(s,{likes:s.likes+1}),a({type:"LIKE",payload:n})},D=function(e,c){e.stopPropagation(),e.preventDefault();var n=t.imageData.find((function(e){return e.id===c}));if(t.favorite.find((function(e){return e.id===n.id})))s("The photo is already in your Favorite Collection"),setTimeout((function(){s("")}),2e3);else{var r=Object.assign(n,{favorites:n.favorites+1});a({type:"ADD_FAVORITES",payload:r})}};return Object(S.jsxs)(S.Fragment,{children:[t?Object(S.jsx)(g.a,{children:Object(S.jsxs)("div",{className:"feedContainer",children:[Object(S.jsx)(b.a,{className:"imgRow row row-cols-5",children:t.imageData.map((function(e,a){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(m.a,{className:"col",children:Object(S.jsxs)("div",{className:"imagPanel",children:[Object(S.jsx)("img",{src:e.largeImageURL,alt:e.tags}),Object(S.jsxs)("button",{className:"hoverText",type:"button",onClick:function(a){return function(e){var a=t.imageData.find((function(t){return t.id===e})),c=t.comments.filter((function(t){return t.id===e}));C({imgObj:a,comments:c}),p({display:"block"})}(e.id)},children:[Object(S.jsxs)("p",{className:"tag",children:["# ",e.tags]}),Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsxs)("span",{className:"likes",onClick:function(t){return U(t,e.id)},children:[Object(S.jsx)(h.e,{})," ",e.likes]}),Object(S.jsxs)("span",{className:"unlikes",onClick:function(t){return U(t,e.id)},children:[Object(S.jsx)(h.d,{})," ",e.comments]}),Object(S.jsxs)("span",{className:"favorites",onClick:function(t){D(t,e.id)},children:[Object(S.jsx)(h.a,{})," ",e.favorites]})]}),Object(S.jsx)("p",{className:"username",children:e.user})]})]})},a)})}))}),N.imgObj&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"modalContainer",style:x,children:[Object(S.jsx)("button",{className:"clsBtn",onClick:function(){p({display:"none"})},children:Object(S.jsx)(f.a,{})}),Object(S.jsxs)(b.a,{className:"imageModal",children:[Object(S.jsx)("img",{className:"col col-8 largeImg",src:N.imgObj.largeImageURL,alt:"largeImage"}),Object(S.jsxs)(m.a,{className:"col-4 userInfo",children:[Object(S.jsxs)("div",{className:"user",children:[Object(S.jsx)("img",{src:N.imgObj.userImageURL,alt:"userImg"}),Object(S.jsxs)("div",{className:"right",children:[Object(S.jsx)("p",{children:N.imgObj.user}),Object(S.jsxs)("p",{className:"tag",children:["# ",N.imgObj.tags]})]})]}),Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsxs)("span",{className:"likes",onClick:function(e){return U(e,N.imgObj.id)},children:[Object(S.jsx)(h.e,{})," ",N.imgObj.likes]}),Object(S.jsxs)("span",{className:"unlikes",onClick:function(e){return U(e,N.imgObj.id)},children:[Object(S.jsx)(h.d,{})," ",N.imgObj.comments]}),Object(S.jsxs)("span",{className:"favorites",onClick:function(e){D(e,N.imgObj.id)},children:[Object(S.jsx)(h.a,{})," ",N.imgObj.favorites]})]}),Object(S.jsx)(u.a,{className:"commentArea",children:Object(S.jsxs)(u.a.Body,{children:[Object(S.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(S.jsx)("p",{className:"commentNum",children:"# 1"}),Object(S.jsx)("p",{children:"This is default comment applied to all photos :)"})]}),0!==t.comments.length&&t.comments.filter((function(e){return e.id===N.imgObj.id})).map((function(e,t){return Object(S.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(S.jsxs)("p",{className:"commentNum",children:["# ",t+2]}),Object(S.jsx)("p",{children:e.comment})]},t)}))]})}),Object(S.jsxs)(O.a,{onSubmit:function(e){e.preventDefault(),""===e.target[0].value?(s("Please add your comments"),setTimeout((function(){s("")}),2e3)):(a({type:"ADD_COMMENTS",payload:F}),L(Object(l.a)(Object(l.a)({},F),{},{comment:""})))},children:[Object(S.jsx)(O.a.Group,{children:Object(S.jsx)(O.a.Control,{type:"text",placeholder:"Add a comment...",onChange:function(e){L({id:N.imgObj.id,comment:e.target.value})},onFocus:function(){L(Object(l.a)(Object(l.a)({},F),{},{comment:""})),s("")},value:F.comment})}),Object(S.jsx)(d.a,{type:"submit",variant:"outline-info",className:"postBtn",children:"Post"})]}),n&&Object(S.jsx)("p",{className:"alert",children:n})]})]})]})})]})}):Object(S.jsx)("h1",{className:"loading",children:"Loading...Hang on a sec..."}),";"]})},B=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(g.a,{children:Object(S.jsx)(G,{})})})},J=a(27),M=(a(60),function(e){Object(U.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(F.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={user:"",previewURL:"",largeImageURL:"",tags:"",likes:0,comments:0,favorites:0,userImageURL:""},e.onChange=function(t){e.setState(Object(J.a)({},t.target.name,t.target.value))},e.onSubmit=function(t,a){a.preventDefault();var c=e.state,n=c.user,s=c.tags,r=a.target.elements[1].files[0],o=window.URL.createObjectURL(r);t({type:"UPLOAD",payload:{user:n,previewURL:o,largeImageURL:o,tags:s,likes:0,comments:0,favorites:0}}),e.props.history.push({pathname:"/feed"})},e}return Object(L.a)(a,[{key:"render",value:function(){var e=this;return Object(S.jsx)(A,{children:function(t){var a=t.dispatch,c=e.state,n=c.user,s=c.previewURL,r=c.tags;return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(g.a,{children:[Object(S.jsx)("h1",{children:" POST"}),Object(S.jsxs)(O.a,{className:"Form",onSubmit:e.onSubmit.bind(e,a),children:[Object(S.jsxs)(O.a.Group,{as:b.a,controlId:"formUser",children:[Object(S.jsx)(O.a.Label,{column:!0,sm:1,children:"User Name"}),Object(S.jsx)(m.a,{sm:5,children:Object(S.jsx)(O.a.Control,{className:"user",type:"text",value:n,name:"user",placeholder:"Enter your username",onChange:e.onChange})})]}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsxs)(O.a.Group,{as:b.a,controlId:"formImage",children:[Object(S.jsx)(O.a.Label,{column:!0,sm:1,children:"Image"}),Object(S.jsx)(m.a,{sm:5,children:Object(S.jsx)(O.a.File,{type:"file",value:s,name:"previewURL",placeholder:"Choose a image",onChange:e.onChange,accept:"image/*"})})]}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsxs)(O.a.Group,{as:b.a,controlId:"formTag",children:[Object(S.jsx)(O.a.Label,{column:!0,sm:1,children:" Tag "}),Object(S.jsx)(m.a,{sm:5,children:Object(S.jsx)(O.a.Control,{rows:5,type:"text",value:r,name:"tags",placeholder:"Enter tag",onChange:e.onChange})})]}),Object(S.jsx)(O.a.Group,{as:b.a,controlId:"formSubmit",children:Object(S.jsx)(m.a,{sm:2,children:Object(S.jsx)(O.a.Control,{className:"submit",type:"submit",value:"submit"})})}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{})]})]})})}})}}]),a}(c.Component)),_=(a(61),function(){var e=Object(c.useContext)(I).images;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(g.a,{children:Object(S.jsx)("div",{className:"favoriteContainer",children:0!==e.favorite.length?e.favorite.length>2?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h2",{children:"Your Favorite Photo Collection"}),Object(S.jsxs)(b.a,{className:"topFavorite",children:[Object(S.jsxs)(m.a,{className:"left",children:[Object(S.jsx)("img",{src:e.favorite[0].largeImageURL,alt:"favorite1"}),Object(S.jsx)("img",{src:e.favorite[1].largeImageURL,alt:"favorite2"})]}),Object(S.jsx)(m.a,{className:"right",children:Object(S.jsx)("img",{src:e.favorite[2].largeImageURL,alt:"favorite3"})})]}),function(){for(var t=[],a=3;a<e.favorite.length;a++)t.push(Object(S.jsx)(m.a,{className:"col-4",children:Object(S.jsx)("img",{src:e.favorite[a].largeImageURL,alt:"favorite3"})}));return Object(S.jsx)(b.a,{className:"bottomFavorite",children:t})}()]}):function(){for(var t=[],a=0;a<e.favorite.length;a++)t.push(Object(S.jsx)(m.a,{className:"col-4",children:Object(S.jsx)("img",{src:e.favorite[a].largeImageURL,alt:"favorite3"})}));return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h2",{children:"Your Favorite Photo Collection"}),Object(S.jsx)(b.a,{className:"layout2",children:t})]})}():Object(S.jsx)("h2",{children:"No collection added yet :)"})})})})}),q=function(e){Object(U.a)(a,e);var t=Object(D.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),a}(c.Component),Y=Object(i.g)(q),H=a(71),K=(a(65),function(){var e=Object(c.useContext)(I),t=e.keyword,a=e.setKeyword,n=e.setSubmitFlg,s=e.alert,r=e.setAlert,l=Object(c.useContext)(I).loginUser,j=Object(i.f)();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(H.a,{fixed:"top",children:[Object(S.jsxs)("header",{children:[Object(S.jsx)("h1",{children:Object(S.jsx)(o.b,{to:"/home",children:"Ystagram"})}),Object(S.jsx)(o.b,{to:"/favorite",className:"linkItem favorite",children:Object(S.jsx)(h.a,{})}),Object(S.jsx)(o.b,{to:"/post",className:"linkItem",children:Object(S.jsx)(h.b,{})}),Object(S.jsx)(o.b,{to:"/login",className:"linkItem",children:Object(S.jsx)(h.f,{})}),0!==Object.keys(l).length&&Object(S.jsxs)("p",{className:"loginUser",children:["Welcome! ",l.name]})]}),Object(S.jsxs)(O.a,{className:"col searchForm",onSubmit:function(e){e.preventDefault(),""===e.target[0].value?(r("Please enter search keyword"),setTimeout((function(){r("")}),2e3)):(a(t),n(!0),j.push("/home"))},children:[s&&Object(S.jsx)("p",{className:"alert",children:s}),Object(S.jsx)(O.a.Group,{children:Object(S.jsx)(O.a.Control,{type:"text",placeholder:"Search...",onChange:function(e){return a(e.target.value)},onFocus:function(){a(""),r("")},value:t})}),Object(S.jsx)(d.a,{type:"submit",className:"searchBtn",children:Object(S.jsx)(h.c,{})})]})]})})}),V=(a(66),function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("footer",{className:"footer",children:Object(S.jsx)("p",{children:"@Team Yuki M. & Yuri H. 2021 All right reserved."})})})}),W=(a(67),function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)({name:"",email:"",password:""}),r=Object(j.a)(s,2),o=r[0],i=r[1],b=Object(c.useContext)(I).dispatchUser;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(g.a,{children:Object(S.jsxs)("div",{className:"loginContainer",children:[Object(S.jsx)("h2",{children:"Log in"}),""!==a?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("p",{className:"errorMsg",children:a})}):"",Object(S.jsxs)(O.a,{className:"loginForm",onSubmit:function(e){e.preventDefault(),""===o.name||""===o.email||""===o.password?n("please enter your credential"):(b({type:"LOGIN",payload:o}),i({name:"",email:"",password:""}))},children:[Object(S.jsxs)(O.a.Group,{controlId:"formGroupName",children:[Object(S.jsx)(O.a.Label,{children:"Name:"}),Object(S.jsx)(O.a.Control,{type:"text",placeholder:"Enter your name",onChange:function(e){return i(Object(l.a)(Object(l.a)({},o),{},{name:e.target.value}))},value:o.name,onFocus:function(){n(""),i({name:"",email:"",password:""})}})]}),Object(S.jsxs)(O.a.Group,{controlId:"formGroupEmail",children:[Object(S.jsx)(O.a.Label,{children:"Email address:"}),Object(S.jsx)(O.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return i(Object(l.a)(Object(l.a)({},o),{},{email:e.target.value}))},value:o.email,onFocus:function(){n("")}})]}),Object(S.jsxs)(O.a.Group,{controlId:"formGroupPassword",children:[Object(S.jsx)(O.a.Label,{children:"Password:"}),Object(S.jsx)(O.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return i(Object(l.a)(Object(l.a)({},o),{},{password:e.target.value}))},value:o.password,onFocus:function(){n("")}})]}),Object(S.jsx)(d.a,{variant:"primary",type:"submit",className:"logInBtn",children:"Log in"}),Object(S.jsx)(d.a,{variant:"outline-info",type:"button",className:"logOutBtn",onClick:function(e){e.preventDefault(),b({type:"LOGOUT"})},children:"Log out"})]})]})})})}),z=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(w,{children:Object(S.jsx)(R,{children:Object(S.jsx)(o.a,{children:Object(S.jsxs)(Y,{children:[Object(S.jsx)(K,{}),Object(S.jsxs)(i.c,{children:[Object(S.jsx)(i.a,{exact:!0,path:"/",component:B}),Object(S.jsx)(i.a,{exact:!0,path:"/home",component:B}),Object(S.jsx)(i.a,{exact:!0,path:"/feed",component:G}),Object(S.jsx)(i.a,{exact:!0,path:"/favorite",component:_}),Object(S.jsx)(i.a,{exact:!0,path:"/post",component:M}),Object(S.jsx)(i.a,{exact:!0,path:"/login",component:W})]}),Object(S.jsx)(V,{})]})})})})})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,75)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(z,{})}),document.getElementById("root")),Q()}},[[68,1,2]]]);
//# sourceMappingURL=main.6b1d2671.chunk.js.map